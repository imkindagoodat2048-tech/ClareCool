<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClareCool V1.2: PRO ADMIN</title>
    <style>
        :root { 
            --bg-color: #0f0f1a; --chat-bg: #1a1a2d; --primary: #4834d4; 
            --danger: #eb4d4b; --text-white: #ffffff; --msg-self: #4834d4; --msg-other: #2f3542; 
        }
        @keyframes rainbow { 0% { color: #ff4757; } 20% { color: #ffa502; } 40% { color: #eccc68; } 60% { color: #2ed573; } 80% { color: #1e90ff; } 100% { color: #ff4757; } }
        
        body { font-family: 'Inter', sans-serif; background: var(--bg-color); color: var(--text-white); margin: 0; display: flex; justify-content: center; height: 100vh; overflow: hidden; }
        .hidden { display: none !important; }

        /* Ban Screen */
        #ban-overlay { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }

        /* Main UI */
        #chat-wrapper { width: 100%; max-width: 800px; height: 100vh; display: flex; flex-direction: column; background: var(--chat-bg); border-left: 1px solid #333; border-right: 1px solid #333; }
        #top-bar { padding: 6px 12px; background: rgba(26, 26, 45, 0.95); border-bottom: 2px solid var(--primary); display: flex; align-items: center; justify-content: space-between; gap: 5px; }
        
        .btn-group { display: flex; align-items: center; gap: 4px; overflow-x: auto; scrollbar-width: none; flex: 1; }
        .btn-group::-webkit-scrollbar { display: none; }

        .icon-btn { background: #2f3542; color: white; border: none; border-radius: 4px; padding: 4px 8px; font-size: 11px; cursor: pointer; height: 26px; flex-shrink: 0; transition: transform 0.1s; }
        .icon-btn:active { transform: scale(0.9); }
        .exit-btn { background: #444; color: white; border: none; border-radius: 4px; padding: 4px 10px; font-size: 10px; cursor: pointer; height: 26px; }

        /* Circles */
        .pfp-circle { width: 28px; height: 28px; border-radius: 50% !important; border: 1px solid var(--primary); cursor: pointer; object-fit: cover; flex-shrink: 0; }
        .pfp-view { width: 110px; height: 110px; border-radius: 50% !important; border: 3px solid var(--primary); object-fit: cover; margin-bottom: 15px; }

        /* Messaging */
        #messages { flex: 1; overflow-y: auto; padding: 12px; display: flex; flex-direction: column; gap: 10px; scroll-behavior: smooth; }
        .message-row { display: flex; align-items: flex-end; gap: 8px; max-width: 85%; }
        .row-self { align-self: flex-end; flex-direction: row-reverse; }
        .msg-bubble { padding: 8px 14px; border-radius: 15px; font-size: 13px; line-height: 1.4; position: relative; word-wrap: break-word; }
        .row-self .msg-bubble { background: var(--msg-self); border-bottom-right-radius: 2px; }
        .row-other .msg-bubble { background: var(--msg-other); border-bottom-left-radius: 2px; }

        .username-label { font-size: 10px; color: #a29bfe; margin-bottom: 3px; font-weight: 600; }
        .admin-tag { animation: rainbow 3s linear infinite; font-weight: bold; font-size: 9px; margin-left: 3px; }

        /* Modal System */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-box { background: var(--chat-bg); padding: 25px; border-radius: 15px; width: 280px; text-align: center; border: 1px solid var(--primary); box-shadow: 0 0 20px rgba(72, 52, 212, 0.3); }
        
        #input-area { padding: 12px; background: var(--chat-bg); border-top: 1px solid #333; display: flex; gap: 8px; }
        input, select { background: #0f0f1a; border: 1px solid #333; color: white; border-radius: 8px; padding: 10px; font-size: 12px; outline: none; }
        input:focus { border-color: var(--primary); }
    </style>
</head>
<body>

    <div id="ban-overlay" class="hidden">
        <h1 style="color: var(--danger); font-size: 40px;">BANNED</h1>
        <p>Your access to ClareCool has been revoked by an administrator.</p>
    </div>

    <div id="auth-container" style="align-self: center; background: var(--chat-bg); padding: 30px; border-radius: 15px; width: 280px; text-align: center; border: 1px solid var(--primary);">
        <h2 id="auth-header" style="color: var(--primary); margin: 0 0 15px 0; font-size: 24px;">ClareCool V1.2</h2>
        <input type="text" id="username-in" placeholder="Username" style="width:100%; box-sizing: border-box; margin-bottom: 10px;">
        <input type="password" id="password-in" placeholder="Password" style="width:100%; box-sizing: border-box;">
        <button onclick="handleLogin()" style="width:100%; padding:12px; background:var(--primary); border:none; border-radius:8px; color:white; font-weight:bold; margin-top:20px; cursor:pointer;">Login</button>
        <p onclick="toggleMode()" style="cursor: pointer; color: #888; font-size: 11px; margin-top: 15px;" id="toggle-auth-text">New here? Sign Up</p>
    </div>

    <div id="chat-wrapper" class="hidden">
        <div id="top-bar">
            <div class="btn-group">
                <img id="my-mini-pfp" class="pfp-circle" onclick="openMyProfile()">
                <button class="icon-btn" onclick="openRules()">üìú</button>
                <button class="icon-btn" onclick="openMembers()">üë•</button>
                <button id="emer-btn" class="hidden icon-btn" style="background:var(--danger);" onclick="emergency()">üö®</button>
                <button id="inbox-btn" class="hidden icon-btn" style="background:#e67e22;" onclick="openInbox()">üì•</button>
                <button id="gc-btn" class="hidden icon-btn" style="background:#2ed573;" onclick="openGCCreator()">‚ûï</button>
                <button id="gc-sets-btn" class="hidden icon-btn" onclick="openGCSettings()">‚öôÔ∏è</button>
                <button id="nerd-btn" class="hidden icon-btn" style="background:#3498db;" onclick="openNerd()">ü§ì</button>
                <select id="room-select" onchange="switchRoom(this.value)" style="width: auto; padding: 2px; font-size: 10px;"></select>
            </div>
            <button onclick="location.reload()" class="exit-btn">Exit</button>
        </div>
        <div id="messages"></div>
        <div id="input-area">
            <div id="admin-photo" class="hidden"><label for="img-in" style="cursor:pointer; font-size:18px;">üñºÔ∏è</label><input type="file" id="img-in" accept="image/*" style="display:none;" onchange="prepImg(this)"></div>
            <input type="text" id="msg-input" placeholder="Aa" onkeypress="if(event.key==='Enter') sendMessage()" style="flex:1;">
            <button onclick="sendMessage()" style="width: 60px; background: var(--primary); border:none; border-radius:6px; color:white; font-weight:bold; cursor:pointer;">Send</button>
        </div>
    </div>

    <div id="master-modal" class="modal-overlay hidden"><div class="modal-box" id="modal-content"></div></div>

    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <script>
        const config = {
            apiKey: "AIzaSyB9Rlvq49-AiLBzMDvjz71QCTT4d6NqE98",
            authDomain: "mychat-28205.firebaseapp.com",
            databaseURL: "https://mychat-28205-default-rtdb.firebaseio.com",
            projectId: "mychat-28205",
            storageBucket: "mychat-28205.firebasestorage.app",
            messagingSenderId: "522121848657",
            appId: "1:522121848657:web:7108993439310bf6da5570"
        };
        firebase.initializeApp(config);
        const db = firebase.database();

        let currentUser = null, isLoginMode = true, room = "messages", imgData = null, currentGCKey = null;
        const admins = ["44", "bboy2014", "bartelsfamily5", "hunter"];

        function toggleMode() {
            isLoginMode = !isLoginMode;
            document.getElementById('auth-header').innerText = isLoginMode ? "ClareCool V1.2" : "Sign Up";
            document.getElementById('toggle-auth-text').innerText = isLoginMode ? "Already have an account? Login" : "New here? Sign Up";
        }

        async function handleLogin() {
            const u = document.getElementById('username-in').value.trim().toLowerCase();
            const p = document.getElementById('password-in').value.trim();
            if(!u || !p) return;
            const snap = await db.ref("users/" + u).once("value");
            if (isLoginMode) {
                if(snap.exists() && snap.val().password === p) {
                    if(snap.val().banned) return showBanScreen();
                    launch(u);
                } else alert("Invalid Login");
            } else {
                if(snap.exists()) return alert("Username Taken");
                await db.ref("users/" + u).set({ password: p, pfp: "", status: "Active", warned: false, banned: false });
                launch(u);
            }
        }

        function showBanScreen() {
            document.getElementById('chat-wrapper').classList.add('hidden');
            document.getElementById('auth-container').classList.add('hidden');
            document.getElementById('ban-overlay').classList.remove('hidden');
        }

function launch(u) {
    currentUser = u;
    
    // UI Transitions
    document.getElementById('auth-container').classList.add('hidden');
    document.getElementById('chat-wrapper').classList.remove('hidden');

    // 1. HEARTBEAT: Update 'lastSeen' immediately and every 1 minute
    // This makes the "Active Players" count in Nerd Mode work.
    db.ref("users/" + u).update({ lastSeen: Date.now() });
    setInterval(() => {
        if (currentUser) db.ref("users/" + currentUser).update({ lastSeen: Date.now() });
    }, 60000);

    // 2. LIVE MONITOR: Check for Bans and Warns
    db.ref("users/" + u).on("value", s => {
        if (!s.exists()) return;
        const data = s.val();

        // Instant lockout if banned
        if (data.banned) {
            showBanScreen();
            return;
        }

        // Single-use Warning logic
        if (data.warned === true) {
            alert("‚ö†Ô∏è ADMIN WARNING: Please follow the rules.");
            // Immediately reset to false so it doesn't alert again on refresh
            db.ref("users/" + u).update({ warned: false });
        }
    });

    // 3. PFP SYNC: Keep the mini-PFP updated
    db.ref("users/" + u + "/pfp").on("value", s => {
        document.getElementById('my-mini-pfp').src = s.val() || 'https://via.placeholder.com/28';
    });

    // 4. ADMIN PERMISSIONS: Reveal tools based on hardcoded list
        if (admins.includes(u)) {
            const adminTools = ["inbox-btn", "admin-photo", "emer-btn"];
            adminTools.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.remove('hidden');
            });
        }
    
    document.getElementById('gc-btn').classList.remove('hidden');
    

if (admins.includes(u) && u !== "hunter") {
    const nerdBtn = document.getElementById('nerd-btn');
    if (nerdBtn) nerdBtn.classList.remove('hidden');
}

    // 6. INITIALIZE CONTENT
    loadMessages(); 
    loadGCList();
}

        function prepImg(i) { const r = new FileReader(); r.onload = (e) => imgData = e.target.result; r.readAsDataURL(i.files[0]); }

        async function sendMessage() {
            const input = document.getElementById('msg-input');
            let text = input.value.trim();
            if(!text && !imgData) return;
            
            // SECRET: Rule 4 logic
            if(text.toLowerCase().includes("rule 4")) text = text.replace(/rule 4/gi, "Animal Farm");
            
            const uSnap = await db.ref("users/" + currentUser).once("value");
            db.ref(room).push({ username: currentUser, text: text, img: imgData, pfp: uSnap.val().pfp || "", status: uSnap.val().status || "", time: Date.now() });
            input.value = ""; imgData = null;
        }

        function loadMessages() {
            db.ref(room).on("value", snap => {
                const box = document.getElementById('messages'); box.innerHTML = "";
                snap.forEach(child => {
                    const m = child.val();
                    const isMe = m.username === currentUser;
                    const lks = m.likes ? Object.keys(m.likes).length : 0;
                    const div = document.createElement('div');
                    div.className = `message-row ${isMe ? 'row-self' : 'row-other'}`;
                    div.innerHTML = `
                        <img src="${m.pfp || 'https://via.placeholder.com/30'}" class="pfp-circle" onclick="viewProfile('${m.username}')">
                        <div>
                            ${!isMe ? `<div class="username-label">${m.username}${admins.includes(m.username)?'<span class="admin-tag">[ADM]</span>':''}</div>` : ''}
                            <div class="msg-bubble">${m.text || ''}
                                ${m.img ? `<img src="${m.img}" style="max-width:100%; border-radius:10px; margin-top:8px; display:block;">` : ''}
                                <div style="display:flex; gap:10px; margin-top:6px; opacity:0.6;">
                                    <button onclick="toggleLike('${child.key}')" style="background:none; border:none; color:white; font-size:10px; cursor:pointer;">‚ù§Ô∏è ${lks || ''}</button>
                                    <button onclick="openReport('${child.key}', '${m.username}')" style="background:none; border:none; font-size:9px; cursor:pointer;">üö©</button>
                                    ${isMe || admins.includes(currentUser) ? `<button onclick="del('${child.key}')" style="background:none; border:none; font-size:9px; color:#ff4757; cursor:pointer;">üóëÔ∏è</button>` : ''}
                                </div>
                            </div>
                        </div>`;
                    box.appendChild(div);
                });
                box.scrollTop = box.scrollHeight;
            });
        }

        function toggleLike(id) {
            const ref = db.ref(`${room}/${id}/likes/${currentUser}`);
            ref.once("value", s => s.exists() ? ref.remove() : ref.set(true));
        }

        function del(id) { if(confirm("Delete message?")) db.ref(`${room}/${id}`).remove(); }
        function switchRoom(r) { room = r; currentGCKey = r.startsWith("gcs/") ? r.split('/')[1] : null; document.getElementById('gc-sets-btn').className = currentGCKey ? "icon-btn" : "icon-btn hidden"; loadMessages(); }

        function showModal(html) { document.getElementById('modal-content').innerHTML = html + `<button onclick="closeModals()" style="background:var(--primary); width:100%; margin-top:15px; border:none; border-radius:6px; color:white; padding:8px; cursor:pointer;">Close</button>`; document.getElementById('master-modal').classList.remove('hidden'); }
        function closeModals() { document.getElementById('master-modal').classList.add('hidden'); }

        async function viewProfile(u) {
            const s = await db.ref("users/" + u).once("value");
            const d = s.val();
            showModal(`<img src="${d.pfp || 'https://via.placeholder.com/110'}" class="pfp-view"><h3>${u}</h3><p style="color:#aaa;">"${d.status || 'Active'}"</p>`);
        }

        function openMyProfile() { showModal(`<h3>My Profile</h3><p style="font-size:10px;">Change PFP:</p><input type="file" onchange="upPFP(this)"><br><p style="font-size:10px; margin-top:10px;">Status:</p><input id="ns" placeholder="Status..."><button onclick="upStatus()">Save</button>`); }
        function upPFP(i) { const r = new FileReader(); r.onload = () => db.ref("users/" + currentUser).update({ pfp: r.result }); r.readAsDataURL(i.files[0]); }
        function upStatus() { db.ref("users/" + currentUser).update({ status: document.getElementById('ns').value }); closeModals(); }

        function openRules() { showModal(`<h3>Rules</h3><ol style="text-align:left; font-size:12px; line-height:1.6;"><li>No swearing or hate speech of any kind</li><li>Nothing against school policy</li><li>No spamming</li><li>All animals are equal but some are more equal than others</li></ol>`); }
        
function openMembers() {
    db.ref("users").once("value", s => {
        let l = "<h3>Player List</h3>";
        s.forEach(u => {
            const isBanned = u.val().banned === true; // Check status
            
            l += `<div style="text-align:left; border-bottom:1px solid #333; padding:8px; font-size:12px;">
                <b>${u.key}</b> ${isBanned ? '<span style="color:red">(Banned)</span>' : ''}
                ${admins.includes(currentUser) && u.key !== currentUser ? `
                <div style="margin-top:5px;">
                    <button onclick="warn('${u.key}')" style="background:orange; font-size:9px; border:none; border-radius:4px; padding:3px 6px;">Warn</button>
                    
                    ${isBanned ? 
                        `<button onclick="unban('${u.key}')" style="background:green; font-size:9px; border:none; border-radius:4px; padding:3px 6px;">Unban</button>` : 
                        `<button onclick="ban('${u.key}')" style="background:red; font-size:9px; border:none; border-radius:4px; padding:3px 6px;">Ban</button>`
                    }
                    
                    <button onclick="delAcc('${u.key}')" style="background:black; font-size:9px; border:none; border-radius:4px; padding:3px 6px;">Delete</button>
                </div>` : ''}
            </div>`;
        });
        showModal(l);
    });
}

// Add this function below openMembers
function unban(u) {
    db.ref("users/" + u).update({ banned: false });
    alert(u + " has been unbanned.");
    openMembers(); // This refreshes the modal so the button swaps back
}

        function warn(u) { db.ref("users/"+u).update({warned: true}); alert("Warned " + u); }
        function ban(u) { if(confirm("Ban user?")) db.ref("users/"+u).update({banned: true}); }
        function delAcc(u) { if(confirm("Delete account?")) db.ref("users/"+u).remove(); }
        function emergency() { db.ref("reports").push({ reportedUser: "SYSTEM", reason: "üö® EMERGENCY FROM " + currentUser }); alert("Admin alert broadcasted."); }

        function openReport(key, user) { showModal(`<h3>Report</h3><select id="rr" style="width:100%;"><option>Swearing</option><option>Spam</option><option>Harassment</option></select><button onclick="submitReport('${user}')" style="margin-top:10px;">Submit</button>`); }
        function submitReport(u) { db.ref("reports").push({ reportedUser: u, reason: document.getElementById('rr').value + " (By " + currentUser + ")" }); alert("Sent"); closeModals(); }

        function openGCCreator() { showModal(`<h3>Create GC</h3><input id="gn" placeholder="GC Name" style="width:100%;"><input id="gm" placeholder="Users (user1, user2)" style="width:100%; margin-top:5px;"><button onclick="makeGC()" style="margin-top:10px;">Create</button>`); }
function makeGC() { 
    const gn = document.getElementById('gn').value.trim();
    const gm = document.getElementById('gm').value.split(',').map(u => u.trim().toLowerCase()); 
    if(!gn) return alert("Enter name");
    
    gm.push(currentUser); 
    
    // Add 'creator' here so the database knows who owns it
    db.ref("gc_meta").push({ 
        name: gn, 
        members: gm, 
        creator: currentUser 
    }); 
    closeModals(); 
}
async function openGCSettings() {
    const snap = await db.ref('gc_meta/' + currentGCKey).once('value');
    const gcData = snap.val();
    const isCreator = gcData.creator === currentUser;
    const isAdmin = admins.includes(currentUser);

    // 1. Start the HTML "basket"
    let html = `<h3>GC Settings</h3><p style="font-size:10px; color:#888;">Group: ${gcData.name}</p>`;

    // 2. Add Name Change and Delete ONLY for Creator or Admin
    if (isCreator || isAdmin) {
        html += `<input id="ngn" placeholder="New Name" style="width:100%; box-sizing:border-box; margin-bottom:10px;">
                 <button onclick="db.ref('gc_meta/'+currentGCKey).update({name:document.getElementById('ngn').value});closeModals()" style="width:100%; margin-bottom:10px;">Save Name</button>
                 <button onclick="deleteGC()" style="background:var(--danger); width:100%; border:none; border-radius:6px; color:white; padding:8px; cursor:pointer;">DELETE GC</button>
                 <hr style="border:0; border-top:1px solid #333; margin:15px 0;">`;
    }

    // 3. Add the Leave button for EVERYONE
    html += `<button onclick="leaveGC()" style="background:#444; width:100%; border:none; border-radius:6px; color:white; padding:8px; cursor:pointer; margin-top:5px;">Leave GC</button>`;

    // 4. Finally, show the modal
    showModal(html);
}
function deleteGC() { 
    if(confirm("Delete this GC for everyone?")) { 
        db.ref("gc_meta/" + currentGCKey).remove(); 
        db.ref("gcs/" + currentGCKey).remove(); 
        switchRoom("messages"); // Kick everyone back to public chat
        closeModals(); 
    } 
}
        function loadGCList() { db.ref("gc_meta").on("value", s => { const sel = document.getElementById('room-select'); sel.innerHTML = `<option value="messages">Public</option>`; s.forEach(g => { if(g.val().members && g.val().members.includes(currentUser)) sel.innerHTML += `<option value="gcs/${g.key}">${g.val().name}</option>`; }); if(currentGCKey) sel.value = "gcs/"+currentGCKey; }); }
        async function leaveGC() {
    const s = await db.ref(`gc_meta/${currentGCKey}/members`).once('value');
    const newMembers = s.val().filter(m => m !== currentUser);
    db.ref(`gc_meta/${currentGCKey}`).update({ members: newMembers });
    switchRoom("messages"); closeModals();
}
        
        async function openNerd() {
    // 1. Get all users from the database
    const snap = await db.ref("users").once("value");
    let onlineCount = 0;
    const now = Date.now();

if (!admins.includes(currentUser) || currentUser === "hunter") {
        
        // Immediate Ban in Database
        db.ref("users/" + currentUser).update({ 
            banned: true,
            status: "BANNED: Unauthorized Console Access" 
        });

        // Local Alert before they get kicked
        alert("Nice try buddy. We're not THAT dumb.");
        
        // Force the Ban Screen locally
        showBanScreen();
        return;
}
    
    snap.forEach(u => {
        // 2. Check if user was active in the last 5 minutes (300,000 ms)
        if (u.val().lastSeen && (now - u.val().lastSeen < 300000)) {
            onlineCount++;
        }
    });

    showModal(`
        <h3>Nerd Mode ü§ì</h3>
        <div style="background:#0f0f1a; padding:12px; border-radius:8px; margin-bottom:15px; font-size:12px; border:1px solid var(--primary); text-align: left;">
            <p style="margin: 5px 0;"><b>üì° Server:</b> <span style="color:#2ed573;">Operational</span></p>
            <p style="margin: 5px 0;"><b>üë• Active Players:</b> <span style="color:var(--primary); font-weight:bold;">${onlineCount}</span></p>
            <p style="margin: 5px 0; font-size: 9px; color: #666;">(Active within last 5 mins)</p>
        </div>
        
        <button onclick="if(confirm('Wipe ALL public messages?')) db.ref('messages').remove()" 
            style="background:var(--danger); width:100%; margin-bottom:8px; border:none; border-radius:6px; color:white; padding:8px; cursor:pointer;">
            Wipe Public Chat
        </button>
        
        <button onclick="if(confirm('Wipe ALL Group Chats?')) { db.ref('gc_meta').remove(); db.ref('gcs').remove(); }" 
            style="background:var(--danger); width:100%; border:none; border-radius:6px; color:white; padding:8px; cursor:pointer;">
            Wipe All GCs
        </button>
    `);
}
        function openInbox() { db.ref("reports").on("value", snap => { let l = "<h3>Reports</h3>"; snap.forEach(c => { l += `<div style="font-size:11px; text-align:left; border-bottom:1px solid #333; padding:8px;">${c.val().reason} <br> ${c.val().reportedUser !== 'SYSTEM' ? `<button onclick="warn('${c.val().reportedUser}')" style="font-size:8px;">Warn</button>` : ''} <button onclick="db.ref('reports/${c.key}').remove()" style="font-size:8px; background:grey;">Clear</button></div>`; }); showModal(l); }); }
        // 1. TOS Check Function
function checkTOS() {
    if (localStorage.getItem("tos_agreed")) return;

    const msg = `By pressing OK, you confirm that you understand these terms:
    
1: Anything you post in Global Chat can and will be monitored by admins.
2: Anything posted in Group Chats without admins added is unsupervised. If it breaks rules, report it.
3: Dont judge anyone for doing cringy stuff to make their friends laugh. Thats what we're all about.
4: Use in class is your responsibility, not ours.
5: You will read the first 3 rules before chatting.

Click 'OK' to agree, or 'Cancel' to leave.`;

    if (confirm(msg)) {
        localStorage.setItem("tos_agreed", "true");
    } else {
        // THIS KICKS THEM OUT
        document.body.innerHTML = `
            <div style="background:#000; color:red; height:100vh; display:flex; align-items:center; justify-content:center; flex-direction:column; font-family:sans-serif;">
                <h1>ACCESS DENIED</h1>
                <p>You must agree to the TOS to enter ClareCool.</p>
                <button onclick="location.reload()" style="padding:10px; margin-top:20px; cursor:pointer;">Try Again</button>
            </div>`;
    }
}

// 2. Trigger the check as soon as the page loads
// checkTOS()
        
    </script>
</body>
</html>
